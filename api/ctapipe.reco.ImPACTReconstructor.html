

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ImPACTReconstructor &mdash; ctapipe v0.6.2.post309+gitdcb64d4</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="EnergyRegressor" href="ctapipe.reco.EnergyRegressor.html" />
    <link rel="prev" title="Reconstructor" href="ctapipe.reco.Reconstructor.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ctapipe
          

          
          </a>

          
            
            
              <div class="version">
                0.6.2.post309+gitdcb64d4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ctapipe_api/index.html">API Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/analysis/index.html">Analysis (<code class="docutils literal notranslate"><span class="pre">analysis</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/calib/index.html">Calibration (<code class="docutils literal notranslate"><span class="pre">calib</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/coordinates/index.html">Coordinates (<code class="docutils literal notranslate"><span class="pre">coordinates</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/core/index.html">Core Structures and Base Classes (<code class="docutils literal notranslate"><span class="pre">core</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/image/index.html">Imaging (<code class="docutils literal notranslate"><span class="pre">image</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/instrument/index.html">Instrument (<code class="docutils literal notranslate"><span class="pre">instrument</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/io/index.html">Input/Output (<code class="docutils literal notranslate"><span class="pre">io</span></code>)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ctapipe_api/reco/index.html">Reconstruction (<code class="docutils literal notranslate"><span class="pre">reco</span></code>)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ctapipe_api/reco/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ctapipe_api/reco/index.html#currently-implemented-algorithms">Currently Implemented Algorithms</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../ctapipe_api/reco/index.html#reference-api">Reference/API</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../ctapipe_api/reco/index.html#module-ctapipe.reco">ctapipe.reco Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/tools/index.html">Command line tools (<code class="docutils literal notranslate"><span class="pre">tools</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/utils/index.html">Utilities (<code class="docutils literal notranslate"><span class="pre">utils</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ctapipe_api/visualization/index.html">Visualization (<code class="docutils literal notranslate"><span class="pre">visualization</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ctapipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../ctapipe_api/index.html">API Docs</a> &raquo;</li>
        
          <li><a href="../ctapipe_api/reco/index.html">Reconstruction (<code class="docutils literal notranslate"><span class="pre">reco</span></code>)</a> &raquo;</li>
        
      <li>ImPACTReconstructor</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/ctapipe.reco.ImPACTReconstructor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="impactreconstructor">
<h1>ImPACTReconstructor<a class="headerlink" href="#impactreconstructor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctapipe.reco.ImPACTReconstructor">
<em class="property">class </em><code class="descclassname">ctapipe.reco.</code><code class="descname">ImPACTReconstructor</code><span class="sig-paren">(</span><em>root_dir='.'</em>, <em>minimiser='minuit'</em>, <em>prior=''</em>, <em>template_scale=1.0</em>, <em>xmax_offset=0</em>, <em>use_time_gradient=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ctapipe.reco.reco_algorithms.Reconstructor</span></code></p>
<p>This class is an implementation if the impact_reco Monte Carlo
Template based image fitting method from parsons14.  This method uses a
comparision of the predicted image from a library of image
templates to perform a maximum likelihood fit for the shower axis,
energy and height of maximum.</p>
<p>Because this application is computationally intensive the usual
advice to use astropy units for all quantities is ignored (as
these slow down some computations), instead units within the class
are fixed:</p>
<ul class="simple">
<li>Angular units in radians</li>
<li>Distance units in metres</li>
<li>Energy units in TeV</li>
</ul>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r06574d406ffe-parsons14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[parsons14]</a></td><td>Parsons &amp; Hinton, Astroparticle Physics 56 (2014), pp. 26-34</td></tr>
</tbody>
</table>
<p class="rubric">Attributes Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.ped_table" title="ctapipe.reco.ImPACTReconstructor.ped_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ped_table</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.spe" title="ctapipe.reco.ImPACTReconstructor.spe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spe</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.choose_seed" title="ctapipe.reco.ImPACTReconstructor.choose_seed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">choose_seed</span></code></a>(seed_list)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_hillas_mean" title="ctapipe.reco.ImPACTReconstructor.get_hillas_mean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_hillas_mean</span></code></a>()</td>
<td>This is a simple function to find the peak position of each image in an event which will be used later in the Xmax calculation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood" title="ctapipe.reco.ImPACTReconstructor.get_likelihood"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_likelihood</span></code></a>(source_x,&nbsp;source_y,&nbsp;core_x,&nbsp;…)</td>
<td>Get the likelihood that the image predicted at the given test position matches the camera image.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_min" title="ctapipe.reco.ImPACTReconstructor.get_likelihood_min"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_likelihood_min</span></code></a>(x)</td>
<td>Wrapper class around likelihood function for use with scipy minimisers</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_nlopt" title="ctapipe.reco.ImPACTReconstructor.get_likelihood_nlopt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_likelihood_nlopt</span></code></a>(x,&nbsp;grad)</td>
<td>Wrapper class around likelihood function for use with scipy minimisers</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_shower_max" title="ctapipe.reco.ImPACTReconstructor.get_shower_max"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_shower_max</span></code></a>(source_x,&nbsp;source_y,&nbsp;core_x,&nbsp;…)</td>
<td>Function to calculate the depth of shower maximum geometrically under the assumption that the shower maximum lies at the brightest point of the camera image.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.image_prediction" title="ctapipe.reco.ImPACTReconstructor.image_prediction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">image_prediction</span></code></a>(tel_type,&nbsp;energy,&nbsp;impact,&nbsp;…)</td>
<td>Creates predicted image for the specified pixels, interpolated from the template library.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.initialise_templates" title="ctapipe.reco.ImPACTReconstructor.initialise_templates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialise_templates</span></code></a>(tel_type)</td>
<td>Check if templates for a given telescope type has been initialised and if not do it and add to the dictionary</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.minimise" title="ctapipe.reco.ImPACTReconstructor.minimise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">minimise</span></code></a>(params,&nbsp;step,&nbsp;limits[,&nbsp;…])</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.predict" title="ctapipe.reco.ImPACTReconstructor.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(shower_seed,&nbsp;energy_seed)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.predict_time" title="ctapipe.reco.ImPACTReconstructor.predict_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict_time</span></code></a>(tel_type,&nbsp;energy,&nbsp;impact,&nbsp;x_max)</td>
<td>Creates predicted image for the specified pixels, interpolated from the template library.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.rotate_translate" title="ctapipe.reco.ImPACTReconstructor.rotate_translate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rotate_translate</span></code></a>(pixel_pos_x,&nbsp;pixel_pos_y,&nbsp;…)</td>
<td>Function to perform rotation and translation of pixel lists</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.set_event_properties" title="ctapipe.reco.ImPACTReconstructor.set_event_properties"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_properties</span></code></a>(image,&nbsp;time,&nbsp;pixel_x,&nbsp;…)</td>
<td>The setter class is used to set the event properties within this class before minimisation can take place.</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="attribute">
<dt id="ctapipe.reco.ImPACTReconstructor.ped_table">
<code class="descname">ped_table</code><em class="property"> = {'CHEC': 0.5, 'DUMMY': 0, 'FlashCam': 2.3, 'LSTCam': 2.8, 'NectarCam': 2.3}</em><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.ped_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ctapipe.reco.ImPACTReconstructor.spe">
<code class="descname">spe</code><em class="property"> = 0.5</em><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.spe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.choose_seed">
<code class="descname">choose_seed</code><span class="sig-paren">(</span><em>seed_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.choose_seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.choose_seed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_hillas_mean">
<code class="descname">get_hillas_mean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_hillas_mean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_hillas_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a simple function to find the peak position of each image
in an event which will be used later in the Xmax calculation. Peak is
found by taking the average position of the n hottest pixels in the
image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_likelihood">
<code class="descname">get_likelihood</code><span class="sig-paren">(</span><em>source_x</em>, <em>source_y</em>, <em>core_x</em>, <em>core_y</em>, <em>energy</em>, <em>x_max_scale</em>, <em>goodness_of_fit=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_likelihood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the likelihood that the image predicted at the given test
position matches the camera image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>source_x: float</strong></dt>
<dd><p class="first last">Source position of shower in the nominal system (in deg)</p>
</dd>
<dt><strong>source_y: float</strong></dt>
<dd><p class="first last">Source position of shower in the nominal system (in deg)</p>
</dd>
<dt><strong>core_x: float</strong></dt>
<dd><p class="first last">Core position of shower in tilted telescope system (in m)</p>
</dd>
<dt><strong>core_y: float</strong></dt>
<dd><p class="first last">Core position of shower in tilted telescope system (in m)</p>
</dd>
<dt><strong>energy: float</strong></dt>
<dd><p class="first last">Shower energy (in TeV)</p>
</dd>
<dt><strong>x_max_scale: float</strong></dt>
<dd><p class="first last">Scaling factor applied to geometrically calculated Xmax</p>
</dd>
<dt><strong>goodness_of_fit: boolean</strong></dt>
<dd><p class="first last">Determines whether expected likelihood should be subtracted from result</p>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd></dd>
<dt><strong>float: Likelihood the model represents the camera image at this position</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_likelihood_min">
<code class="descname">get_likelihood_min</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_likelihood_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper class around likelihood function for use with scipy
minimisers</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x: ndarray</strong></dt>
<dd><p class="first last">Array of minimisation parameters</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float: Likelihood value of test position</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_likelihood_nlopt">
<code class="descname">get_likelihood_nlopt</code><span class="sig-paren">(</span><em>x</em>, <em>grad</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_likelihood_nlopt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_nlopt" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper class around likelihood function for use with scipy
minimisers</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x: ndarray</strong></dt>
<dd><p class="first last">Array of minimisation parameters</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float: Likelihood value of test position</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_shower_max">
<code class="descname">get_shower_max</code><span class="sig-paren">(</span><em>source_x</em>, <em>source_y</em>, <em>core_x</em>, <em>core_y</em>, <em>zen</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_shower_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_shower_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the depth of shower maximum geometrically
under the assumption that the shower maximum lies at the
brightest point of the camera image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>source_x: float</strong></dt>
<dd><p class="first last">Event source position in nominal frame</p>
</dd>
<dt><strong>source_y: float</strong></dt>
<dd><p class="first last">Event source position in nominal frame</p>
</dd>
<dt><strong>core_x: float</strong></dt>
<dd><p class="first last">Event core position in telescope tilted frame</p>
</dd>
<dt><strong>core_y: float</strong></dt>
<dd><p class="first last">Event core position in telescope tilted frame</p>
</dd>
<dt><strong>zen: float</strong></dt>
<dd><p class="first last">Zenith angle of event</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float: Depth of maximum of air shower</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.image_prediction">
<code class="descname">image_prediction</code><span class="sig-paren">(</span><em>tel_type</em>, <em>energy</em>, <em>impact</em>, <em>x_max</em>, <em>pix_x</em>, <em>pix_y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.image_prediction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.image_prediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates predicted image for the specified pixels, interpolated
from the template library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tel_type: string</strong></dt>
<dd><p class="first last">Telescope type specifier</p>
</dd>
<dt><strong>energy: float</strong></dt>
<dd><p class="first last">Event energy (TeV)</p>
</dd>
<dt><strong>impact: float</strong></dt>
<dd><p class="first last">Impact diance of shower (metres)</p>
</dd>
<dt><strong>x_max: float</strong></dt>
<dd><p class="first last">Depth of shower maximum (num bins from expectation)</p>
</dd>
<dt><strong>pix_x: ndarray</strong></dt>
<dd><p class="first last">X coordinate of pixels</p>
</dd>
<dt><strong>pix_y: ndarray</strong></dt>
<dd><p class="first last">Y coordinate of pixels</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ndarray: predicted amplitude for all pixels</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.initialise_templates">
<code class="descname">initialise_templates</code><span class="sig-paren">(</span><em>tel_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.initialise_templates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.initialise_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if templates for a given telescope type has been initialised
and if not do it and add to the dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tel_type: dictionary</strong></dt>
<dd><p class="first last">Dictionary of telescope types in event</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>boolean: Confirm initialisation</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.minimise">
<code class="descname">minimise</code><span class="sig-paren">(</span><em>params</em>, <em>step</em>, <em>limits</em>, <em>minimiser_name='minuit'</em>, <em>max_calls=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.minimise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.minimise" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>params: ndarray</strong></dt>
<dd><p class="first last">Seed parameters for fit</p>
</dd>
<dt><strong>step: ndarray</strong></dt>
<dd><p class="first last">Initial step size in the fit</p>
</dd>
<dt><strong>limits: ndarray</strong></dt>
<dd><p class="first last">Fit bounds</p>
</dd>
<dt><strong>minimiser_name: str</strong></dt>
<dd><p class="first last">Name of minimisation method</p>
</dd>
<dt><strong>max_calls: int</strong></dt>
<dd><p class="first last">Maximum number of calls to minimiser</p>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd></dd>
<dt><strong>tuple: best fit parameters and errors</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>shower_seed</em>, <em>energy_seed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.predict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>shower_seed: ReconstructedShowerContainer</strong></dt>
<dd><p class="first last">Seed shower geometry to be used in the fit</p>
</dd>
<dt><strong>energy_seed: ReconstructedEnergyContainer</strong></dt>
<dd><p class="first last">Seed energy to be used in fit</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ReconstructedShowerContainer, ReconstructedEnergyContainer:</strong></dt>
<dd></dd>
<dt><strong>Reconstructed ImPACT shower geometry and energy</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.predict_time">
<code class="descname">predict_time</code><span class="sig-paren">(</span><em>tel_type</em>, <em>energy</em>, <em>impact</em>, <em>x_max</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.predict_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.predict_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates predicted image for the specified pixels, interpolated
from the template library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tel_type: string</strong></dt>
<dd><p class="first last">Telescope type specifier</p>
</dd>
<dt><strong>energy: float</strong></dt>
<dd><p class="first last">Event energy (TeV)</p>
</dd>
<dt><strong>impact: float</strong></dt>
<dd><p class="first last">Impact diance of shower (metres)</p>
</dd>
<dt><strong>x_max: float</strong></dt>
<dd><p class="first last">Depth of shower maximum (num bins from expectation)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ndarray: predicted amplitude for all pixels</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ctapipe.reco.ImPACTReconstructor.rotate_translate">
<em class="property">static </em><code class="descname">rotate_translate</code><span class="sig-paren">(</span><em>pixel_pos_x</em>, <em>pixel_pos_y</em>, <em>x_trans</em>, <em>y_trans</em>, <em>phi</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.rotate_translate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.rotate_translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to perform rotation and translation of pixel lists</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>pixel_pos_x: ndarray</strong></dt>
<dd><p class="first last">Array of pixel x positions</p>
</dd>
<dt><strong>pixel_pos_y: ndarray</strong></dt>
<dd><p class="first last">Array of pixel x positions</p>
</dd>
<dt><strong>x_trans: float</strong></dt>
<dd><p class="first last">Translation of position in x coordinates</p>
</dd>
<dt><strong>y_trans: float</strong></dt>
<dd><p class="first last">Translation of position in y coordinates</p>
</dd>
<dt><strong>phi: float</strong></dt>
<dd><p class="first last">Rotation angle of pixels</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ndarray,ndarray: Transformed pixel x and y coordinates</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.set_event_properties">
<code class="descname">set_event_properties</code><span class="sig-paren">(</span><em>image</em>, <em>time</em>, <em>pixel_x</em>, <em>pixel_y</em>, <em>type_tel</em>, <em>tel_x</em>, <em>tel_y</em>, <em>array_direction</em>, <em>hillas</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.set_event_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.set_event_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>The setter class is used to set the event properties within this
class before minimisation can take place. This simply copies a
bunch of useful properties to class members, so that we can
use them later without passing all this information around.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>image: dictionary</strong></dt>
<dd><p class="first last">Amplitude of pixels in camera images</p>
</dd>
<dt><strong>pixel_x: dictionary</strong></dt>
<dd><p class="first last">X position of pixels in nominal system</p>
</dd>
<dt><strong>pixel_y: dictionary</strong></dt>
<dd><p class="first last">Y position of pixels in nominal system</p>
</dd>
<dt><strong>pixel_area: dictionary</strong></dt>
<dd><p class="first last">Area of pixel in each telescope type</p>
</dd>
<dt><strong>type_tel: dictionary</strong></dt>
<dd><p class="first last">Type of telescope</p>
</dd>
<dt><strong>tel_x: dictionary</strong></dt>
<dd><p class="first last">X position of telescope</p>
</dd>
<dt><strong>tel_y: dictionary</strong></dt>
<dd><p class="first last">Y position of telescope</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ctapipe.reco.EnergyRegressor.html" class="btn btn-neutral float-right" title="EnergyRegressor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ctapipe.reco.Reconstructor.html" class="btn btn-neutral" title="Reconstructor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright ctapipe developers.  Last updated 27 Feb 2019 13:26

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>